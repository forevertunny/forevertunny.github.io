window.__require=function e(t,o,n){function r(i,a){if(!o[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var p="function"==typeof __require&&__require;if(!a&&p)return p(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var u=o[i]={exports:{}};t[i][0].call(u.exports,function(e){return r(t[i][1][e]||e)},u,u.exports,e,t,o,n)}return o[i].exports}for(var c="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({ChipController:[function(e,t,o){"use strict";cc._RF.push(t,"d3c6dmjsWdBkreQ0zLdTAfK","ChipController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./GameManager"),r=cc._decorator,c=r.ccclass,i=r.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chip_btns=new Array,t.chips=new Array,t.moveY=30,t.currSlectIndex=0,t.chipObjs=[],t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){var e=new cc.Component.EventHandler;e.target=this.node,e.component="ChipController",e.handler="onClick_Big",this.big.clickEvents.push(e);var t=new cc.Component.EventHandler;t.target=this.node,t.component="ChipController",t.handler="onClick_Seven",this.seven.clickEvents.push(t);var o=new cc.Component.EventHandler;o.target=this.node,o.component="ChipController",o.handler="onClick_Samll",this.small.clickEvents.push(o);for(var n=0;n<this.chip_btns.length;n++){var r=new cc.Component.EventHandler;r.target=this.node,r.component="ChipController",r.handler="onClick_chip",r.customEventData=""+n,this.chip_btns[n].clickEvents.push(r)}cc.tween(this.chip_btns[this.currSlectIndex].node).to(.15,{position:cc.v2(0,this.moveY)}).start()},t.prototype.reset=function(){this.chipObjs.forEach(function(e){e.active=!1})},t.prototype.onClick_chip=function(e,t){cc.tween(this.chip_btns[this.currSlectIndex].node).to(.15,{position:cc.v2(0,0)}).start(),this.currSlectIndex=parseInt(t),cc.tween(this.chip_btns[this.currSlectIndex].node).to(.15,{position:cc.v2(0,this.moveY)}).start()},t.prototype.onClick_Big=function(){this.createChip(0)},t.prototype.onClick_Seven=function(){this.createChip(1)},t.prototype.onClick_Samll=function(){this.createChip(2)},t.prototype.createChip=function(e){var t=this.convenChipToMany();if(n.default.Instance.IsCanBet(t)){var o=this.chipObjs.find(function(e){return 0==e.active}),r=null;if(void 0===o){var c=new cc.Node;(r=c.addComponent(cc.Sprite)).spriteFrame=this.chips[this.currSlectIndex],o=cc.instantiate(c),this.chipObjs.push(o)}else r=o.getComponent(cc.Sprite);r.spriteFrame=this.chips[this.currSlectIndex],o.parent=0==e?this.big.node:1==e?this.seven.node:this.small.node,o.setScale(.5);var i=cc.v3(200*Math.random()-100,200*Math.random()-100,0);o.setPosition(i),o.active=!0,n.default.Instance.addChip(e,this.currSlectIndex,t)}},t.prototype.convenChipToMany=function(){switch(this.currSlectIndex){case 0:return 1e3;case 1:return 1e4;case 2:return 1e5;case 3:return 1e6;case 4:return 5e6;case 5:return 1e7}},__decorate([i(cc.Button)],t.prototype,"chip_btns",void 0),__decorate([i(cc.SpriteFrame)],t.prototype,"chips",void 0),__decorate([i(cc.Button)],t.prototype,"big",void 0),__decorate([i(cc.Button)],t.prototype,"small",void 0),__decorate([i(cc.Button)],t.prototype,"seven",void 0),__decorate([i],t.prototype,"moveY",void 0),t=__decorate([c],t)}(cc.Component);o.default=a,cc._RF.pop()},{"./GameManager":"GameManager"}],CountDown:[function(e,t,o){"use strict";cc._RF.push(t,"2fc83TtUihCV77cKT1GtUvY","CountDown");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,c=arguments.length,i=c<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(c<3?r(i):c>3?r(t,o,i):r(t,o))||i);return c>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=c.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return n(t,e),t.prototype.start=function(){this.label.string=""},t.prototype.upTimer=function(e){this.label.string=""+Math.round(e/1e3)},r([a(cc.Label)],t.prototype,"label",void 0),t=r([i],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],Fanpai:[function(e,t,o){"use strict";cc._RF.push(t,"c299ecLwZVEVa2NrbJMfoFE","Fanpai"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,c=n.property,i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onfanpaiCallBck=null,t}return __extends(t,e),t.prototype.setFanpaiCallback=function(e){this.onfanpaiCallBck=e},t.prototype.onLoad=function(){},t.prototype.reset=function(){this.node.active=!1,this.number.node.active=!1},t.prototype.play=function(e){this.number.spriteFrame=e,this.node.active=!0,this.anim.play("fanpai")},t.prototype.fanpaiFinsh=function(){var e=this;this.number.node.active=!0,setTimeout(function(){e.reset(),null!=e.onfanpaiCallBck&&e.onfanpaiCallBck()},100)},__decorate([c(cc.Animation)],t.prototype,"anim",void 0),__decorate([c(cc.Sprite)],t.prototype,"number",void 0),t=__decorate([r],t)}(cc.Component);o.default=i,cc._RF.pop()},{}],GameManager:[function(e,t,o){"use strict";cc._RF.push(t,"49e52IQD9RGwJ3JJWMAcOVm","GameManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./CountDown"),r=e("./GameState"),c=e("./ChipController"),i=e("./WebSocket"),a=e("./Poke/PokeController"),s=cc._decorator,p=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ws=null,t.gameState=r.default.BetIng,t}var o;return __extends(t,e),o=t,Object.defineProperty(t,"Instance",{get:function(){return this._Instance},enumerable:!0,configurable:!0}),t.prototype.IsCanBet=function(e){return this.gameState!=r.default.GameIng&&this.money>=e},Object.defineProperty(t.prototype,"GameState",{get:function(){return this.gameState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsConnect",{get:function(){return null!=this.ws&&this.ws.isConnect},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){null===o.Instance?o._Instance=this:this.destroy(),this.ws=new i.Isaac.MyWebSocket("wss://thansizeserver.herokuapp.com//wss",this)},t.prototype.start=function(){},t.prototype.addChip=function(e,t,o){console.log(e,o),this.money-=o,this.money_lab.string="Money: "+this.money,this.ws.reqBet(e,t)},t.prototype.upTimer=function(e){this.CountDown.upTimer(e)},t.prototype.upState=function(e){this.gameState=parseInt(e),console.log(e,this.gameState)},t.prototype.upMoney=function(e){console.log(e),this.money=parseInt(e),this.money_lab.string="Money: "+this.money},t.prototype.onReqBet=function(){},t.prototype.onRefPoke=function(e){this.pokeController.fanpai(e.number,e.suit)},t.prototype.onRefResult=function(e){console.log(e),this.upMoney(e),this.pokeController.reset(),this.chipController.reset()},t._Instance=null,__decorate([u(n.default)],t.prototype,"CountDown",void 0),__decorate([u(c.default)],t.prototype,"chipController",void 0),__decorate([u(a.default)],t.prototype,"pokeController",void 0),__decorate([u(cc.Label)],t.prototype,"money_lab",void 0),t=o=__decorate([p],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./ChipController":"ChipController","./CountDown":"CountDown","./GameState":"GameState","./Poke/PokeController":"PokeController","./WebSocket":"WebSocket"}],GameState:[function(e,t,o){"use strict";cc._RF.push(t,"401baxUG3BGBJT6RtXHIwDw","GameState"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.BetIng=0,e.GameIng=1,e}();o.default=n,cc._RF.pop()},{}],PokeController:[function(e,t,o){"use strict";cc._RF.push(t,"95a59sv1ulCcpnVZLkcAgmp","PokeController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Poke/Poke"),r=cc._decorator,c=r.ccclass,i=r.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.number=[],t}return __extends(t,e),t.prototype.start=function(){},t.prototype.fanpai=function(e,t){this.poke.play(this.number[e-1])},t.prototype.reset=function(){this.poke.reset()},__decorate([i(cc.SpriteFrame)],t.prototype,"number",void 0),__decorate([i(n.default)],t.prototype,"poke",void 0),t=__decorate([c],t)}(cc.Component);o.default=a,cc._RF.pop()},{"../Poke/Poke":"Poke"}],Poke:[function(e,t,o){"use strict";cc._RF.push(t,"435781ZsWJIQ4nyzupdzJDx","Poke"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Poke/Fanpai"),r=cc._decorator,c=r.ccclass,i=r.property,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){var e=this;this.fanpai.setFanpaiCallback(function(){return e.onFanPaiComplete()})},t.prototype.play=function(e){this.frontNum.spriteFrame=e,this.fanpai.play(e)},t.prototype.onFanPaiComplete=function(){this.front.active=!0},t.prototype.reset=function(){this.front.active=!1},__decorate([i(cc.Node)],t.prototype,"front",void 0),__decorate([i(cc.Sprite)],t.prototype,"frontNum",void 0),__decorate([i(n.default)],t.prototype,"fanpai",void 0),t=__decorate([c],t)}(cc.Component);o.default=a,cc._RF.pop()},{"../Poke/Fanpai":"Fanpai"}],ServerEvent:[function(e,t,o){"use strict";cc._RF.push(t,"3085cm0H5FL75/clD18O8Fe","ServerEvent"),Object.defineProperty(o,"__esModule",{value:!0}),o.ServerEvent=void 0;o.ServerEvent={Login:1,Timer:16,State:17,Bet:18,Money:19,Poke:20,Result:21},cc._RF.pop()},{}],WebSocket:[function(e,t,o){"use strict";cc._RF.push(t,"71bf1jatRpBM634n8OFQW05","WebSocket"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ServerEvent");(function(e){var t=function(){function e(e,t){this.sock=null,this.isConnect=!1,this.gamemanager=null,this.gamemanager=t,this.sock=new WebSocket(e),this.sock.binaryType="arraybuffer",this.sock.onopen=this.on_open.bind(this),this.sock.onmessage=this.on_message.bind(this),this.sock.onclose=this.on_close.bind(this),this.sock.onerror=this.on_error.bind(this)}return e.prototype.on_open=function(){this.send_data(JSON.stringify({type:n.ServerEvent.Login}))},e.prototype.on_message=function(e){var t=JSON.parse(e.data);switch(t.type){case n.ServerEvent.Login:this.isConnect=!0,this.uid=t.value.uid,this.gamemanager.upState(t.value.state),this.gamemanager.upMoney(t.value.money);break;case n.ServerEvent.Timer:this.gamemanager.upTimer(t.value);break;case n.ServerEvent.State:this.gamemanager.upState(t.value);break;case n.ServerEvent.Bet:break;case n.ServerEvent.Poke:this.gamemanager.onRefPoke(t.value);break;case n.ServerEvent.Result:this.gamemanager.onRefResult(t.value)}},e.prototype.on_close=function(){this.close(),this.isConnect=!1},e.prototype.on_error=function(){this.close(),this.isConnect=!1},e.prototype.close=function(){this.sock&&(this.sock.close(),this.sock=null,this.isConnect=!0)},e.prototype.send_data=function(e){this.sock.send(e)},e.prototype.reqBet=function(e,t){this.send_data(JSON.stringify({uid:this.uid,type:n.ServerEvent.Bet,value:{betindex:e,chipindex:t}}))},e}();e.MyWebSocket=t})(o.Isaac||(o.Isaac={})),cc._RF.pop()},{"./ServerEvent":"ServerEvent"}]},{},["ChipController","CountDown","GameManager","GameState","Fanpai","Poke","PokeController","ServerEvent","WebSocket"]);